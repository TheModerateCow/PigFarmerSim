package com.example.pigfarmersim.environments;

import android.graphics.Canvas;

import com.example.pigfarmersim.helpers.GameConstants;

public class MapManager {

    private GameMap currentMap;
    private float cameraX, cameraY;

    public MapManager() {
        initTestMap();
    }

    public void setCameraValues(float cameraX, float cameraY) {
        this.cameraX = cameraX;
        this.cameraY = cameraY;
    }

    public boolean canMoveHere(float x, float y) {
        if (x < 0 || y < 0) {
            return false;
        }

        if (x >= getMaxWidthCurrentMap() || y >= getMaxHeightCurrentMap()) {
            return false;
        }

        return true;
    }

    public int getMaxWidthCurrentMap() {
        return currentMap.getArrayWidth() * GameConstants.Sprite.SIZE;
    }

    public int getMaxHeightCurrentMap() {
        return currentMap.getArrayHeight() * GameConstants.Sprite.SIZE;
    }

    public void draw(Canvas c) {
        for (int j = 0; j < currentMap.getArrayHeight(); j++)
            for (int i = 0; i < currentMap.getArrayWidth(); i++)
                c.drawBitmap(Floor.OUTSIDE.getSprite(currentMap.getSpriteId(i, j)), i * GameConstants.Sprite.SIZE + cameraX, j * GameConstants.Sprite.SIZE + cameraY, null);

    }

    private void initTestMap() {
        // Map sprite, each id is one tile from the map.

//        int[][] spriteIds = {
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//                {454, 276, 275, 275, 190, 275, 275, 279, 275, 275, 275, 297, 275, 275, 279, 275, 275, 275, 297, 110, 0, 1, 1, 1, 2, 110, 132},
//
//        };
        int[][] spriteIds = new int[64][192];
        for (int row = 0; row < 64; row++) {
            for (int col = 0; col < 192; col++) {
                spriteIds[row][col] = row * 64 + (col % 64);
            }
        }
        currentMap = new GameMap(spriteIds);
    }
}
